// Jenkinsfile
  
node('maven') {
   parameters {
    gitParameter branchFilter: 'origin/(.*)', defaultValue: 'main', name: 'BRANCH', type: 'PT_BRANCH'
   }
 stage('Source Build') {
  
 // sh "oc whoami"
 // sh "id"
 //git branch: "${params.BRANCH}" ,
 git branch: "main" ,
     url: "https://github.com/rockplace2022/hello-source.git"
 
 sh "mvn clean package"
 }
  
stage('Image Build') {
 sh "oc start-build sample-v1 -n sample --from-file=target/undertow-servlet.jar --follow"
 }
  
}
